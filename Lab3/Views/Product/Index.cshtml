@model IEnumerable<Lab3.Models.Product>

@{
    ViewData["Title"] = "Inventory OS";
}

<div style="padding: 80px var(--page-padding);">
    <div style="display: flex; justify-content: space-between; align-items: baseline; margin-bottom: 40px; border-bottom: 2px solid var(--text-main); padding-bottom: 16px;">
        <h1 class="serif" style="font-size: 3rem; margin: 0;">Inventory_OS</h1>
        <div style="display: flex; gap: 16px;">
            <a asp-action="List" class="btn-outline" style="text-decoration: none;">[ LIST VIEW ]</a>
            <a asp-action="Create" class="btn-analog">+ NEW ASSET</a>
        </div>
    </div>

    <!-- BLUEPRINT GRID -->
    <div class="blueprint-grid">
        <div class="blueprint-header">
            <span>ID</span>
            <span>VISUAL</span>
            <span>IDENTIFIER</span>
            <span>CATEGORY</span>
            <span>VALUE</span>
            <span>STATUS</span>
            <span>ACTIONS</span>
        </div>
        
        @foreach (var item in Model)
        {
            <div class="blueprint-row">
                <div class="mono text-muted">#@item.ProductId</div>
                <div>
                   <img src="@(string.IsNullOrEmpty(item.ImageUrl) ? "data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='40' height='40' viewBox='0 0 24 24' fill='none' stroke='%23333' stroke-width='1'%3E%3Crect x='3' y='3' width='18' height='18' rx='2'/%3E%3Ccircle cx='12' cy='12' r='3'/%3E%3C/svg%3E" : item.ImageUrl)" 
                        style="width: 40px; height: 40px; object-fit: cover; filter: grayscale(100%);" 
                        onerror="this.src='data:image/svg+xml,%3Csvg xmlns=\'http://www.w3.org/2000/svg\' width=\'40\' height=\'40\' viewBox=\'0 0 24 24\' fill=\'none\' stroke=\'%23333\' stroke-width=\'1\'%3E%3Crect x=\'3\' y=\'3\' width=\'18\' height=\'18\' rx=\'2\'/%3E%3Ccircle cx=\'12\' cy=\'12\' r=\'3\'/%3E%3C/svg%3E'" />
                </div>
                <div class="mono fw-bold">@item.Name</div>
                <div class="mono">@item.Category</div>
                <div class="mono accent-clay">@item.UnitPrice.ToString("C0")</div>
                <div>
                     @if(item.AvailableQuantity < 10) {
                        <span class="status-indicator status-low">LOW (@item.AvailableQuantity)</span>
                     } else {
                        <span class="status-indicator">OK (@item.AvailableQuantity)</span>
                     }
                </div>
                <div class="action-group">
                    <a asp-action="Edit" asp-route-id="@item.ProductId" class="action-link">[EDIT]</a>
                    <a asp-action="Details" asp-route-id="@item.ProductId" class="action-link">[VIEW]</a>
                    <a asp-action="Delete" asp-route-id="@item.ProductId" class="action-link text-danger">[DEL]</a>
                </div>
            </div>
        }
    </div>
</div>
