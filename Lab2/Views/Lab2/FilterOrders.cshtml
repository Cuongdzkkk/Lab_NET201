@model IEnumerable<Lab2.Models.Order>

@{
    ViewData["Title"] = "Logistics Filter";
    var filter = ViewBag.FilterModel as Lab2.Models.OrderFilterModel;
}

<div class="bento-card" style="border-color: var(--neon-purple);">
    <div class="flex-between mb-2">
        <h2 style="color: var(--neon-purple);">LOGISTICS FILTER</h2>
        <a asp-action="Index" class="btn btn-pink" style="border-style:dashed;">[ RETURN TO DECK ]</a>
    </div>

    <!-- Filter Form -->
    <form method="get" style="margin-bottom: 3rem;">
        <div style="display: grid; grid-template-columns: 1fr 1fr 1fr auto; gap: 1.5rem; align-items: end;">
            <div>
                 <label class="form-label" style="color:var(--neon-purple);">START DATE</label>
                 <input type="date" name="StartDate" class="form-control" value="@filter?.StartDate?.ToString("yyyy-MM-dd")" style="color:var(--neon-purple) !important; border-bottom-color:rgba(188,19,254,0.3) !important;" />
            </div>
            <div>
                 <label class="form-label" style="color:var(--neon-purple);">END DATE</label>
                 <input type="date" name="EndDate" class="form-control" value="@filter?.EndDate?.ToString("yyyy-MM-dd")" style="color:var(--neon-purple) !important; border-bottom-color:rgba(188,19,254,0.3) !important;" />
            </div>
            <div>
                 <label class="form-label" style="color:var(--neon-purple);">STATUS</label>
                 <select name="Status" class="form-control" style="color:var(--neon-purple) !important; border-bottom-color:rgba(188,19,254,0.3) !important;">
                    <option value="">ALL SIGNALS</option>
                    <!option value="New" @(filter?.Status=="New"?"selected":"")>NEW</!option>
                    <!option value="Shipped" @(filter?.Status=="Shipped"?"selected":"")>IN_TRANSIT</!option>
                    <!option value="Completed" @(filter?.Status=="Completed"?"selected":"")>DELIVERED</!option>
                </select>
            </div>
            <button type="submit" class="btn btn-pink" style="height: 50px;">FILTER LOGS</button>
        </div>
    </form>

    <!-- Results or Alert -->
    @if(Model != null && Model.Any())
    {
        <table class="tech-table">
            <thead>
                <tr>
                    <th style="color:var(--neon-purple); border-bottom-color: rgba(188,19,254,0.3);">ID</th>
                    <th style="color:var(--neon-purple); border-bottom-color: rgba(188,19,254,0.3);">TARGET (CUSTOMER)</th>
                    <th style="color:var(--neon-purple); border-bottom-color: rgba(188,19,254,0.3);">DATE</th>
                    <th style="color:var(--neon-purple); border-bottom-color: rgba(188,19,254,0.3);">STATUS</th>
                </tr>
            </thead>
            <tbody>
                @foreach (var item in Model)
                {
                    <tr>
                        <td>@item.OrderId</td>
                        <td style="color:#fff;">@item.CustomerName</td>
                        <td>@item.OrderDate.ToShortDateString()</td>
                        <td>
                            @if(item.Status == "Completed") {
                                <span style="color:var(--neon-green); border:1px solid var(--neon-green); padding:2px 5px; font-size:0.7rem; letter-spacing:1px;">DELIVERED</span>
                            } else {
                                @item.Status.ToUpper()
                            }
                        </td>
                    </tr>
                }
            </tbody>
        </table>
    }
    else
    {
        <div class="alert-cyber">
            ⚠️ SIGNAL VOID: NO LOGS FOUND FOR THIS FILTER
        </div>
    }
</div>
